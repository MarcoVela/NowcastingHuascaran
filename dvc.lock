schema: '2.0'
stages:
  merge_lcfa_2019:
    cmd:
    - julia scripts/dataset/merge_lcfa.jl ../GLM-L2-LCFA/2019
    deps:
    - path: scripts/dataset/merge_lcfa.jl
      md5: b85bf2fa77d5aed5bce3556dc2a58cbf
      size: 377
    - path: src/dataset/l2_lcfa_merge.jl
      md5: 12ae176a471818a05744eebc642c2c8f
      size: 1410
    - path: src/structs/FlashRecords.jl
      md5: d70788ccd28818f30f0309d419dab1ea
      size: 1580
    outs:
    - path: data/exp_pro/GLM-L2-LCFA/2019.jld2
      md5: 05df9a0f68dc2b8b6c5138baea609f34
      size: 7893048977
      isexec: true
  merge_lcfa_2020:
    cmd:
    - julia scripts/dataset/merge_lcfa.jl ../GLM-L2-LCFA/2020
    deps:
    - path: scripts/dataset/merge_lcfa.jl
      md5: b85bf2fa77d5aed5bce3556dc2a58cbf
      size: 377
    - path: src/dataset/l2_lcfa_merge.jl
      md5: 12ae176a471818a05744eebc642c2c8f
      size: 1410
    - path: src/structs/FlashRecords.jl
      md5: d70788ccd28818f30f0309d419dab1ea
      size: 1580
    outs:
    - path: data/exp_pro/GLM-L2-LCFA/2020.jld2
      md5: d84ac85255a2bcf85eed8f91583af5d9
      size: 6762022226
      isexec: true
  merge_lcfa_2021:
    cmd:
    - julia scripts/dataset/merge_lcfa.jl ../GLM-L2-LCFA/2021
    deps:
    - path: scripts/dataset/merge_lcfa.jl
      md5: b85bf2fa77d5aed5bce3556dc2a58cbf
      size: 377
    - path: src/dataset/l2_lcfa_merge.jl
      md5: 12ae176a471818a05744eebc642c2c8f
      size: 1410
    - path: src/structs/FlashRecords.jl
      md5: d70788ccd28818f30f0309d419dab1ea
      size: 1580
    outs:
    - path: data/exp_pro/GLM-L2-LCFA/2021.jld2
      md5: 08250d1028c96b60ee8211df5af1ec66
      size: 6905111344
      isexec: true
  grid_dataset:
    cmd:
    - julia scripts/dataset/grid_fed.jl -s 4 -t 15 -f data/exp_pro/GLM-L2-LCFA/2019.jld2
    deps:
    - path: data/exp_pro/GLM-L2-LCFA/2019.jld2
      md5: 05df9a0f68dc2b8b6c5138baea609f34
      size: 7893048977
    - path: data/exp_pro/GLM-L2-LCFA/2020.jld2
      md5: d84ac85255a2bcf85eed8f91583af5d9
      size: 6762022226
    - path: data/exp_pro/GLM-L2-LCFA/2021.jld2
      md5: 08250d1028c96b60ee8211df5af1ec66
      size: 6905111344
    - path: scripts/dataset/grid_fed.jl
      md5: bf4ee32aad228f41931bdf3e183b9406
      size: 2937
    - path: src/dataset/fed_grid.jl
      md5: e2ea8d10b6b6ae4fe86c679d450cfb4f
      size: 7615
    - path: src/dataset/l2_lcfa_merge.jl
      md5: 12ae176a471818a05744eebc642c2c8f
      size: 1410
    params:
      params.yaml:
        ds.resolution:
          spatial: 4
          temporal: 15
    outs:
    - path: data/exp_pro/GLM-L2-LCFA-GRID/spatial=4_temporal=15_year=2019
      md5: c60f6f4c452b865c01cd65dc3d3bfb5a.dir
      size: 160524600
      nfiles: 12
  cluster_dataset:
    cmd:
    - julia scripts/dataset/cluster_grid.jl --folder=data/exp_pro/GLM-L2-LCFA-GRID/spatial=4_temporal=15_year=2019
      --threshold=1.0 --binary --radius=3.0 --time_scale=2.0 --windows=5,5,10 --min_neighbors=50
      --min_cluster_size=100 --dimensions=64,64,20 --padding=2,2,4 --single-file=dataset.h5
    deps:
    - path: data/exp_pro/GLM-L2-LCFA-GRID/spatial=4_temporal=15_year=2019
      md5: c60f6f4c452b865c01cd65dc3d3bfb5a.dir
      size: 160524600
      nfiles: 12
    - path: scripts/dataset/cluster_grid.jl
      md5: 7c533650d8c350a3aad9371b08dc41f4
      size: 4814
    - path: src/dataset/cluster_dbscan.jl
      md5: 1c905349a4d139f97fad8a3c5422a4ed
      size: 6168
    - path: src/dataset/fed_grid.jl
      md5: e2ea8d10b6b6ae4fe86c679d450cfb4f
      size: 7615
    params:
      params.yaml:
        ds.cluster:
          threshold: 1.0
          radius: 3.0
          min_neighbors: 50
          min_cluster_size: 100
          t_scale: 2.0
          windows: 5,5,10
          dimensions: 64,64,20
          padding: 2,2,4
        ds.resolution:
          spatial: 4
          temporal: 15
    outs:
    - path: data/training/dataset.h5
      md5: 52537a136ef89e8e16d9f6aa16806390
      size: 26338541
      isexec: true
